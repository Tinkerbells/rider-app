import{x as se,y as re,r as x,z as oe,j as a,h as N,A as ae,n as R,f as T,D as ie,d as O,k as A,s as z,E as ce,C as le,B as E}from"./index-BX78bmKv.js";import{m as de,e as B,n as ue,b as fe,H as b,d as me,B as S,f as M,p as pe,I as ge,F as xe,A as he,g as ye,D as Ce,h as je,j as Se,C as be,k as we,T as Ge,l as $e}from"./page-TmMBG_-U.js";import{D as ve}from"./Delete-BKem2Thc.js";import{A as ke,h as De}from"./horse-BRY_Wruj.js";const Me=(e,n)=>e.filter(t=>n.includes(t)),j=(e,n,t)=>{const r=e.keys[0];Array.isArray(n)?n.forEach((o,s)=>{t((c,l)=>{s<=e.keys.length-1&&(s===0?Object.assign(c,l):c[e.up(e.keys[s])]=l)},o)}):n&&typeof n=="object"?(Object.keys(n).length>e.keys.length?e.keys:Me(e.keys,Object.keys(n))).forEach(s=>{if(e.keys.includes(s)){const c=n[s];c!==void 0&&t((l,m)=>{r===s?Object.assign(l,m):l[e.up(s)]=m},c)}}):(typeof n=="number"||typeof n=="string")&&t((o,s)=>{Object.assign(o,s)},n)};function w(e){return`--Grid-${e}Spacing`}function G(e){return`--Grid-parent-${e}Spacing`}const H="--Grid-columns",C="--Grid-parent-columns",Ne=({theme:e,ownerState:n})=>{const t={};return j(e.breakpoints,n.size,(r,o)=>{let s={};o==="grow"&&(s={flexBasis:0,flexGrow:1,maxWidth:"100%"}),o==="auto"&&(s={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"}),typeof o=="number"&&(s={flexGrow:0,flexBasis:"auto",width:`calc(100% * ${o} / var(${C}) - (var(${C}) - ${o}) * (var(${G("column")}) / var(${C})))`}),r(t,s)}),t},Re=({theme:e,ownerState:n})=>{const t={};return j(e.breakpoints,n.offset,(r,o)=>{let s={};o==="auto"&&(s={marginLeft:"auto"}),typeof o=="number"&&(s={marginLeft:o===0?"0px":`calc(100% * ${o} / var(${C}) + var(${G("column")}) * ${o} / var(${C}))`}),r(t,s)}),t},Te=({theme:e,ownerState:n})=>{if(!n.container)return{};const t={[H]:12};return j(e.breakpoints,n.columns,(r,o)=>{const s=o??12;r(t,{[H]:s,"> *":{[C]:s}})}),t},Ae=({theme:e,ownerState:n})=>{if(!n.container)return{};const t={};return j(e.breakpoints,n.rowSpacing,(r,o)=>{const s=typeof o=="string"?o:e.spacing?.(o);r(t,{[w("row")]:s,"> *":{[G("row")]:s}})}),t},ze=({theme:e,ownerState:n})=>{if(!n.container)return{};const t={};return j(e.breakpoints,n.columnSpacing,(r,o)=>{const s=typeof o=="string"?o:e.spacing?.(o);r(t,{[w("column")]:s,"> *":{[G("column")]:s}})}),t},Pe=({theme:e,ownerState:n})=>{if(!n.container)return{};const t={};return j(e.breakpoints,n.direction,(r,o)=>{r(t,{flexDirection:o})}),t},We=({ownerState:e})=>({minWidth:0,boxSizing:"border-box",...e.container&&{display:"flex",flexWrap:"wrap",...e.wrap&&e.wrap!=="wrap"&&{flexWrap:e.wrap},gap:`var(${w("row")}) var(${w("column")})`}}),Ee=e=>{const n=[];return Object.entries(e).forEach(([t,r])=>{r!==!1&&r!==void 0&&n.push(`grid-${t}-${String(r)}`)}),n},He=(e,n="xs")=>{function t(r){return r===void 0?!1:typeof r=="string"&&!Number.isNaN(Number(r))||typeof r=="number"&&r>0}if(t(e))return[`spacing-${n}-${String(e)}`];if(typeof e=="object"&&!Array.isArray(e)){const r=[];return Object.entries(e).forEach(([o,s])=>{t(s)&&r.push(`spacing-${o}-${String(s)}`)}),r}return[]},Ie=e=>e===void 0?[]:typeof e=="object"?Object.entries(e).map(([n,t])=>`direction-${n}-${t}`):[`direction-xs-${String(e)}`];function Oe(e,n){e.item!==void 0&&delete e.item,e.zeroMinWidth!==void 0&&delete e.zeroMinWidth,n.keys.forEach(t=>{e[t]!==void 0&&delete e[t]})}const Be=ie(),Fe=se("div",{name:"MuiGrid",slot:"Root"});function Le(e){return ae({props:e,name:"MuiGrid",defaultTheme:Be})}function Ue(e={}){const{createStyledComponent:n=Fe,useThemeProps:t=Le,useTheme:r=re,componentName:o="MuiGrid"}=e,s=(p,d)=>{const{container:f,direction:g,spacing:i,wrap:u,size:$}=p,v={root:["root",f&&"container",u!=="wrap"&&`wrap-xs-${String(u)}`,...Ie(g),...Ee($),...f?He(i,d.breakpoints.keys[0]):[]]};return R(v,k=>T(o,k),{})};function c(p,d,f=()=>!0){const g={};return p===null||(Array.isArray(p)?p.forEach((i,u)=>{i!==null&&f(i)&&d.keys[u]&&(g[d.keys[u]]=i)}):typeof p=="object"?Object.keys(p).forEach(i=>{const u=p[i];u!=null&&f(u)&&(g[i]=u)}):g[d.keys[0]]=p),g}const l=n(Te,ze,Ae,Ne,Pe,We,Re),m=x.forwardRef(function(d,f){const g=r(),i=t(d),u=oe(i);Oe(u,g.breakpoints);const{className:$,children:v,columns:k=12,container:P=!1,component:F="div",direction:L="row",wrap:U="wrap",size:_={},offset:q={},spacing:D=0,rowSpacing:Q=D,columnSpacing:K=D,unstable_level:y=0,...V}=u,Y=c(_,g.breakpoints,h=>h!==!1),J=c(q,g.breakpoints),X=d.columns??(y?void 0:k),Z=d.spacing??(y?void 0:D),ee=d.rowSpacing??d.spacing??(y?void 0:Q),te=d.columnSpacing??d.spacing??(y?void 0:K),W={...u,level:y,columns:X,container:P,direction:L,wrap:U,spacing:Z,rowSpacing:ee,columnSpacing:te,size:Y,offset:J},ne=s(W,g);return a.jsx(l,{ref:f,as:F,ownerState:W,className:N(ne.root,$),...V,children:x.Children.map(v,h=>x.isValidElement(h)&&de(h,["Grid"])&&P&&h.props.container?x.cloneElement(h,{unstable_level:h.props?.unstable_level??y+1}):h)})});return m.muiName="Grid",m}function _e(e){return T("MuiCard",e)}O("MuiCard",["root"]);const qe=e=>{const{classes:n}=e;return R({root:["root"]},_e,n)},Qe=z(B,{name:"MuiCard",slot:"Root"})({overflow:"hidden"}),Ke=x.forwardRef(function(n,t){const r=A({props:n,name:"MuiCard"}),{className:o,raised:s=!1,...c}=r,l={...r,raised:s},m=qe(l);return a.jsx(Qe,{className:N(m.root,o),elevation:s?8:void 0,ref:t,ownerState:l,...c})});function Ve(e){return T("MuiCardContent",e)}O("MuiCardContent",["root"]);const Ye=e=>{const{classes:n}=e;return R({root:["root"]},Ve,n)},Je=z("div",{name:"MuiCardContent",slot:"Root"})({padding:16,"&:last-child":{paddingBottom:24}}),Xe=x.forwardRef(function(n,t){const r=A({props:n,name:"MuiCardContent"}),{className:o,component:s="div",...c}=r,l={...r,component:s},m=Ye(l);return a.jsx(Je,{as:s,className:N(m.root,o),ownerState:l,ref:t,...c})}),I=Ue({createStyledComponent:z("div",{name:"MuiGrid",slot:"Root",overridesResolver:(e,n)=>{const{ownerState:t}=e;return[n.root,t.container&&n.container]}}),componentName:"MuiGrid",useThemeProps:e=>A({props:e,name:"MuiGrid"}),useTheme:ue}),Ze=ce(a.jsx("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"})),et=({open:e,onClose:n,horse:t,isEdit:r=!1})=>{const{control:o,handleSubmit:s,reset:c,formState:{errors:l}}=ye({defaultValues:{name:t?.name||""}});x.useEffect(()=>{t&&r&&c({name:t.name})},[t,r,c]);const m=f=>{r&&t?b.updateHorse(t.id,{...t,name:f.name}):b.addHorse({id:Date.now().toString(),name:f.name,colors:["brown"]}),c({name:""}),n()},p=()=>{c({name:""}),n()},d=()=>{t&&(b.removeHorse(t.id),c({name:""}),n())};return a.jsxs(Ce,{open:e,onClose:p,fullWidth:!0,maxWidth:"xs",children:[a.jsx(je,{children:r?"Редактировать лошадь":"Добавить лошадь"}),a.jsxs("form",{onSubmit:s(m),children:[a.jsx(Se,{children:a.jsx(be,{name:"name",control:o,rules:{required:"Имя лошади обязательно",minLength:{value:2,message:"Имя должно содержать минимум 2 символа"}},render:({field:f})=>a.jsx(we,{fullWidth:!0,error:!!l.name,children:a.jsx(Ge,{...f,value:f.value,autoFocus:!0,margin:"dense",label:"Имя лошади",fullWidth:!0,error:!!l.name,helperText:l.name?.message})})})}),a.jsxs($e,{children:[r&&a.jsx(E,{onClick:d,color:"error",variant:"contained",startIcon:a.jsx(ve,{}),children:"Удалить"}),a.jsx(E,{type:"submit",color:"primary",variant:"contained",children:r?"Сохранить":"Добавить"})]})]})]})},ot=fe(()=>{const{horses:e}=b,[n,t]=x.useState(!1),[r,o]=x.useState(void 0),[s,c]=x.useState(""),[l,m]=x.useState(e);x.useEffect(()=>{if(s.trim()==="")m(e);else{const i=s.toLowerCase();m(e.filter(u=>u.name.toLowerCase().includes(i)))}},[e,s]);const p=()=>{o(void 0),t(!0)},d=i=>{o(i),t(!0)},f=()=>{t(!1)},g=i=>{c(i.target.value)};return a.jsxs(me,{children:[a.jsxs(le,{maxWidth:"sm",sx:{py:2,height:"calc(100vh - 56px)",display:"flex",flexDirection:"column"},children:[a.jsx(B,{elevation:0,sx:{p:2,mb:2,borderRadius:4},children:a.jsx(S,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:a.jsx(M,{variant:"h5",component:"h1",fontWeight:"bold",align:"center",children:"Лошадки"})})}),a.jsx(S,{sx:{mb:2,px:1},children:a.jsx(pe,{fullWidth:!0,placeholder:"Поиск лошадей...",value:s,onChange:g,startAdornment:a.jsx(ge,{position:"start",children:a.jsx(Ze,{})})})}),a.jsx(S,{sx:{flex:1,overflow:"auto",mb:2,px:1},children:l.length>0?a.jsx(I,{container:!0,spacing:2,columns:12,children:l.map(i=>a.jsx(I,{size:{xs:6},children:a.jsx(Ke,{sx:{borderRadius:2,height:"100%",display:"flex",flexDirection:"column",transition:"all 0.2s ease","&:hover":{transform:"translateY(-2px)",boxShadow:4},overflow:"hidden"},onClick:()=>d(i),children:a.jsxs(Xe,{sx:{display:"flex",flexDirection:"column",alignItems:"center",py:1,flexGrow:1},children:[a.jsx(ke,{src:De,alt:i.name,sx:{width:60,height:60,mb:1}}),a.jsx(M,{variant:"h6",align:"center",children:i.name})]})})},i.id))}):a.jsx(S,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:a.jsx(M,{variant:"body1",color:"text.secondary",children:s?"Не найдено лошадей по запросу":"Нет добавленных лошадей"})})}),a.jsx(S,{sx:{display:"flex",justifyContent:"center",mb:2},children:a.jsx(xe,{color:"primary","aria-label":"add",onClick:p,sx:{position:"relative",zIndex:1},children:a.jsx(he,{})})})]}),a.jsx(et,{open:n,onClose:f,horse:r,isEdit:!!r})]})});export{ot as HorsesPage};
