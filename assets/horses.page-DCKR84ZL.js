import{f as y,d as v,r as x,k as b,j as e,s as S,h as D,n as w,P as H,y as R,C as A,x as u,T as C,G as j,A as F,B as g}from"./index-GTRwz0H-.js";import{b as W,H as h,d as T,k as U,I as k,F as P,A as B,e as L,D as N,f as z,g as G,C as q,h as E,T as O,j as Q}from"./page-DoROUpcq.js";import{D as V}from"./Delete-DgFX9Koy.js";import{h as Y}from"./horse-Bvqeak-l.js";function $(t){return y("MuiCard",t)}v("MuiCard",["root"]);const J=t=>{const{classes:o}=t;return w({root:["root"]},$,o)},K=S(H,{name:"MuiCard",slot:"Root"})({overflow:"hidden"}),X=x.forwardRef(function(o,s){const n=b({props:o,name:"MuiCard"}),{className:c,raised:a=!1,...l}=n,r={...n,raised:a},d=J(r);return e.jsx(K,{className:D(d.root,c),elevation:a?8:void 0,ref:s,ownerState:r,...l})});function Z(t){return y("MuiCardContent",t)}v("MuiCardContent",["root"]);const _=t=>{const{classes:o}=t;return w({root:["root"]},Z,o)},ee=S("div",{name:"MuiCardContent",slot:"Root"})({padding:16,"&:last-child":{paddingBottom:24}}),se=x.forwardRef(function(o,s){const n=b({props:o,name:"MuiCardContent"}),{className:c,component:a="div",...l}=n,r={...n,component:a},d=_(r);return e.jsx(ee,{as:a,className:D(d.root,c),ownerState:r,ref:s,...l})}),te=R(e.jsx("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"})),ne=({open:t,onClose:o,horse:s,isEdit:n=!1})=>{const{control:c,handleSubmit:a,reset:l,formState:{errors:r}}=L({defaultValues:{name:s?.name||""}});x.useEffect(()=>{s&&n&&l({name:s.name})},[s,n,l]);const d=m=>{n&&s?h.updateHorse(s.id,{...s,name:m.name}):h.addHorse({id:Date.now().toString(),name:m.name,colors:["brown"]}),l({name:""}),o()},f=()=>{l({name:""}),o()},p=()=>{s&&(h.removeHorse(s.id),l({name:""}),o())};return e.jsxs(N,{open:t,onClose:f,fullWidth:!0,maxWidth:"xs",children:[e.jsx(z,{children:n?"Редактировать лошадь":"Добавить лошадь"}),e.jsxs("form",{onSubmit:a(d),children:[e.jsx(G,{children:e.jsx(q,{name:"name",control:c,rules:{required:"Имя лошади обязательно",minLength:{value:2,message:"Имя должно содержать минимум 2 символа"}},render:({field:m})=>e.jsx(E,{fullWidth:!0,error:!!r.name,children:e.jsx(O,{...m,value:m.value,autoFocus:!0,margin:"dense",label:"Имя лошади",fullWidth:!0,error:!!r.name,helperText:r.name?.message})})})}),e.jsxs(Q,{children:[n&&e.jsx(g,{onClick:p,color:"error",variant:"contained",startIcon:e.jsx(V,{}),children:"Удалить"}),e.jsx(g,{type:"submit",color:"primary",variant:"contained",children:n?"Сохранить":"Добавить"})]})]})]})},ie=W(()=>{const{horses:t}=h,[o,s]=x.useState(!1),[n,c]=x.useState(void 0),[a,l]=x.useState(""),[r,d]=x.useState(t);x.useEffect(()=>{if(a.trim()==="")d(t);else{const i=a.toLowerCase();d(t.filter(M=>M.name.toLowerCase().includes(i)))}},[t,a]);const f=()=>{c(void 0),s(!0)},p=i=>{c(i),s(!0)},m=()=>{s(!1)},I=i=>{l(i.target.value)};return e.jsxs(T,{children:[e.jsxs(A,{maxWidth:"sm",sx:{py:2,height:"calc(100vh - 56px)",display:"flex",flexDirection:"column"},children:[e.jsx(H,{elevation:0,sx:{p:2,mb:2,borderRadius:4},children:e.jsx(u,{sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(C,{variant:"h5",component:"h1",fontWeight:"bold",align:"center",children:"Лошадки"})})}),e.jsx(u,{sx:{mb:2,px:1},children:e.jsx(U,{fullWidth:!0,placeholder:"Поиск лошадей...",value:a,onChange:I,startAdornment:e.jsx(k,{position:"start",children:e.jsx(te,{})})})}),e.jsx(u,{sx:{flex:1,overflow:"auto",mb:2,px:1},children:r.length>0?e.jsx(j,{container:!0,spacing:2,columns:12,children:r.map(i=>e.jsx(j,{size:{xs:6},children:e.jsx(X,{sx:{borderRadius:2,height:"100%",display:"flex",flexDirection:"column",transition:"all 0.2s ease","&:hover":{transform:"translateY(-2px)",boxShadow:4},overflow:"hidden"},onClick:()=>p(i),children:e.jsxs(se,{sx:{display:"flex",flexDirection:"column",alignItems:"center",py:1,flexGrow:1},children:[e.jsx(F,{src:Y,alt:i.name,sx:{width:60,height:60,mb:1}}),e.jsx(C,{variant:"h6",align:"center",children:i.name})]})})},i.id))}):e.jsx(u,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"},children:e.jsx(C,{variant:"body1",color:"text.secondary",children:a?"Не найдено лошадей по запросу":"Нет добавленных лошадей"})})}),e.jsx(u,{sx:{display:"flex",justifyContent:"center",mb:2},children:e.jsx(P,{color:"primary","aria-label":"add",onClick:f,sx:{position:"relative",zIndex:1},children:e.jsx(B,{})})})]}),e.jsx(ne,{open:o,onClose:m,horse:n,isEdit:!!n})]})});export{ie as HorsesPage};
